<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>TypeScript</title>


		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		
		<link rel="stylesheet" type="text/css" href="css/theme/devoxx.css" id="theme">
		

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/solarized_light.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->

		<style>
		pre.small-code {
			font-size:0.36em;
		}
		</style>
	</head>

	<body>

		<div class="reveal convex center">

			<!-- Any section element inside of this container is displayed as a slide -->
			<div class="slides">
				<section data-background="images/devoxxBG.png" class="first-slide">
					<h1>TypeScript</h1>
					<h2>le JavaScript statiquement typé</h2>
					<div class="center">
					<img src="images/typescript-logo.png" />
					</div>
				</section>

				<section>
					<h2>Qui suis-je ?</h2>
					<ul>
						<li>Benoit Lemoine</li>
						<li>Développeur full-stack chez Xebia</li>
						<li>@benoit_lemoine</li>
					</ul>
					<!-- TODO une image à la con ? -->
				</section>

				<section >
					<h2>JavaScript c'est bien, mais...</h2>
					  <img height="300" src="images/majesticDuck.jpg" />
					  <img class="fragment" height="300" src="images/Platypus.jpg" />
					  
					<aside class="notes">
						"Je veux un canard, un animal avec un bec, qui nage et qui pond des oeufs"
						<ul>
							<li>Gros projets - difficultés de refactoring</li>
							<li>Frustration face aux manques du langages (en ES5)</li>
						</ul>
					</aside>					
				</section>

				<section>
					<h2>Historique de TypeScript</h2>
					
					<ul>
						<li>Made in Microsoft en 2012...</li>
						<li>... mais open-source et libre (License Apache 2) : <a href="https://github.com/Microsoft/TypeScript">https://github.com/Microsoft/TypeScript</a></li>
						<li class="fragment">Super-ensemble d'ES5</li>
						<li class="fragment">Typage statique</li>
						<li class="fragment">Polyfill pour ES6</li>
					</ul>
					
				</section>

				<section>
					<h2>Les types - déclarer un type</h2>
					<pre><code data-trim>
var name:string = 'Dolan';
var nbLegs:number = 2;

var isMamal = false;

//doesn't compile
//number is not assignable to type boolean
isMamal = 3;
					 </code></pre>			
				</section>

				<section>
					<h2>Les types - les génériques</h2>
					<pre><code data-trim>
var featherColors:Array&lt;string&gt; = ['green', 'red', 'grey'];


var lengthOfClors: Array&lt;number&gt; = featherColors.map(function(color) {
	return color.length;
}); // [5, 3, 4]
					</code></pre>			
				</section>

				<section>
					<h2>Les types - Les classes</h2> 
					<pre><code data-trim>
class Animal {
  constructor(public name) { }
}						

class Duck extends Animal {
  quack() {
    return 'quack';
  }
}

class Platypus extends Animal {}

var dolan:Duck = new Duck('Dolan');
console.log(dolan.quack());
					</code></pre>
				</section>


				<section>
					<h2>Les types - typage graduel</h2>
					<div class="center">
						<img  src="images/jokerDuck.jpg" height="200"/>					
					</div>
					<pre><code data-trim  class="javascript">	
var scrooge = new Duck('Scrooge');
var perry = new Platypus('Perry');
//Doesn't compile Platypus is not assignable to type Duck
scrooge = perry;

//we can assign anything to any
var jokerDuck:any = perry;

//We can assign any to everything
scrooge = jokerDuck;
					</code></pre>
				</section>

				<section>
					<h2>Les types - Les  interfaces</h2> 
					<pre ><code data-trim>
interface Quacker {
  name:string
  quack():string;
} 			

class Goose extends Animal implements Quacker {
  quack() {
    return 'honk';
  }
}
var daffie:Quacker = new Goose('daffie');
					</code></pre>
<aside class="notes">
	Détruite à la compilation
</aside>
				</section>

				<section>
					<h2>Les types - Le typage structurel</h2> 
					<pre><code data-trim>
interface Quacker {
  name:string
  quack():string;
} 			

var chicken:Quacker = {
  name:'Chicken', 
  quack: function() {
    return 'cluck cluck';
  }
};
					</code></pre>
				</section>

				<section>
					<h2>Les types - Union Type</h2>
					<pre><code data-trim>
var perry = new Platypus('Perry');
var donald = new Duck('Donald');

var animals:Array&lt;Animal&gt; = [perry, donald];
var duckOrPlatypus:Array&lt;Duck|Platypus&gt; = [perry, donald];
					 </code></pre>
				</section>
				
				<section>
					
					<h2>EcmaScript 2015 - EcmaScript 6</h2>
<pre style="float:left;width:49%"><code data-trim  class="javascript">
//TypeScript	
let lordify = function(names = []) {



  return names
    .map(name => `sir ${name}`);  
}


</code></pre>
<pre style="float:right;width:49%"><code data-trim  class="javascript">
//JavaScript
let lordify = function(names) {
  if (names === void 0) { 
    names = []; 
  }
  return names
    .map(function (name) {
      return ("sir " + name); 
    });
}

</code></pre>


				</section>

				<section>
					<h2>Les modules internes</h2>
					<pre style="float:left;width:49%;"><code data-trim class="javascript">
//Fichier Animal.ts					
module Animal {
	var privateVar = "test";
}


//Fichier Duck.ts
/// &lt;reference path="Animal.ts" /&gt;
module Animal {
    export class Duck {}
}




new Animal.Duck();

</code></pre>
<pre style="float:right;width:49%;"><code data-trim class="javascript">
//Fichier Animal.ts compilé	
var Animal;
(function (Animal) {
    var privateVar = "test";
})(Animal || (Animal = {}));

//Fichier Duck.ts compilé
var Animal;
(function (Animal) {
    var Duck = (function () {
        function Duck() { }
        return Duck;
    })();
    Animal.Duck = Duck;
})(Animal || (Animal = {}));
new Animal.Duck();


</code></pre>
				</section>

				<section>
					<h2>Les modules externes <br /> AMD ou Common JS</h2>
					
					<pre style="float:left;width:49%;"><code data-trim class="javascript">
//Fichier Dolan.ts
import Duck = require('Duck');




export var dolan = new Duck('Dolan')
</code></pre>
<pre style="float:right;width:49%;"><code data-trim class="javascript">
//Dolan.ts compilé en AMD
define(
 ["require", "exports", 'Duck'], 
 function (require, exports, Duck) {
    exports.dolan = new Duck('Dolan');
 }
);
</code></pre>
<pre style="float:right;width:49%;"><code data-trim class="javascript">
//Dolan.ts compilé en CommonJS
var Duck = require('Duck');

module.exports = new Duck('Dolan')
</code></pre>
				</section>

				<section>
					<h2>Les déclarations d'ambiance</h2>
					<pre><code data-trim class="javascript">
declare var _;

_.filter([1,2,3], (i) => i%2 === 0);
</code></pre>
				</section>

				<section>
					<h2>Definitely Typed</h2>
					 <a href="http://definitelytyped.org/">http://definitelytyped.org/</a>
<pre><code  data-trim class="javascript">
/// &lt;reference path="lodash/lodash.d.ts" /&gt;

_.filter([1, 2, 3, 4], (i) => i%2 === 0) // [2,4]
_.filter([1, 2, 3, 4], (i:string) => i%2 === 0) //ne compile pas
</code></pre>
                </section>


				<section>
					<h2>TSD</h2>
					<a href="http://definitelytyped.org/tsd/">http://definitelytyped.org/tsd/</a>
					<ul>
						<li>Gestionnaire de dépendances pour les fichiers de définition</li>
						<li>Pas de gestion de version (mais ça arrive...)</li>					
					</ul>
				</section>

	<section>
					<section>
                        <h2>Exemple Angular - Avant</h2>
                        <pre><code data-trim class="javascript">
angular.module('MyCtrl', ['myService','$scope', 
  function(myService, $scope) {
    
    $scope.myValue = myService.maValue;

    $scope.changeValue = function() {
        $scope.myValue = Math.random();
    };
  }
])

//template
&lt;div ng-controller="MyCtrl"&gt;
 {{myValue}}
&lt;/div&gt;

                        </code></pre>
                    </section>

                    <section>
                        <h2>Exemple Angular - Après</h2>
                        <pre><code data-trim class="javascript">
class MyCtrl {
    myValue:number;

    static $inject = ['myService'];
    constructor(myService:MyService) {
    	this.myValue = myService.maValue;
    }    
    changeValue() {
        this.myValue = Math.random();
    }
}
angular.module(MyCtrl.name, MyCtrl);
//template
&lt;div ng-controller="MyCtrl as myCtrl"&gt;
 {{myCtrl.myValue}}
&lt;/div&gt;

                        </code></pre>
                    </section>
				</section>

				<section>
					<h2>Utiliser TypeScript</h2>
					<ul>						
						<li>Grunt, Gulp</li>
						<li>Plugin pour Play, Wro4j, Grails, etc.</li>
						<li>à la main : compilateur en JavaScript</li>
					</ul>
				</section>

				<section>						
					<h2>TypeScript 1.5 - RTTI</h2>
						<pre style="float:left;width:49%"><code data-trim class="javascript">
//TypeScript


function firstChar(word : string) {
  return word.charAt(0);    							
}


var x : any = 3;
displayFirstCharacter(x);
						</code></pre>
						<pre style="float:right;width:49%"><code data-trim class="javascript">
//JavaScript							
import * as rtts from 'rtts';
							
function firstChar(word) {
  rtts.types(word, rtts.string);
  return word.charAt(0);    							
}

var x = 3;
displayFirstCharacter(x);


						</code></pre>
						
						<aside class="notes">
							RunTime Type Information<br/>
							Introspection de type
						</aside>
						
					</section>
					<section>
					<h2>TypeScript 1.5 - Annotations</h2>
					<pre><code data-trim class="javascript">
function addAnnotation&lt;A&gt;(c: A, annotation: any): A {
    ((&lt;any&gt;c).annotations || ((&lt;any&gt;c).annotations = []))
      .push(annotation);
    return c;
}

function Template(arg: { url: string, directives: any[] }) {
    return c => addAnnotation(c, new TemplateAnnotation(arg));
}

@Template({
  url: '/todo.html',
  directives: [Foreach]
})
class TodoApp {
}

						</code></pre>
					</section>
					<section>
					<h2>TypeScript 1.5 - ES6</h2>
					<pre><code data-trim class="javascript">
var [m, d, y] = [3, 14, 1977];
console.log(d) // 14

for (let word of ["one", "two", "three"]) 
  console.log(word);  //affiche "one","two","three"

function* idMaker() {
    var index = 0;
    while(true)
        yield index++;
}

var gen = idMaker();

console.log(gen.next().value); // 0
console.log(gen.next().value); // 1
					</code></pre>
					
					</section>
				

				<section>
					<h2>TypeScript 2.0</h2>
					<ul>                        
                        <li>ES6 (modules, template String, etc.)</li>
                        <li>ES7 (async/await)</li>
                    </ul>
				</section>

				<section>
					<h2>Les limites</h2>
					<ul>
						<li>Un précompileur de plus</li>
						<li>La vitesse de compilation</li>
						<li>Les fichiers de définition</li>
						<li>Pas compatible avec JSX</li>
					</ul>
				</section>

				<section>
					<h2>Conclusion</h2>
					<ul>
						<li>Migration Progressive</li>
						<li>Facilité d'apprentissage</li>
						<li>Compatibilité avec ES6</li>
						<li>Refactoring simplifié</li>
						<li>Assistance de l'IDE améliorée</li>
					</ul>					
				</section>

				<section>
					<h2>Questions&nbsp;?</h2>
				</section>
	
			</div>

			<div class="footer"><span class="hashtag">#typescriptDevoxx</span><span class="twitter">@benoit_lemoine</span></div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});
		
		Reveal.addEventListener( 'slidechanged', function( event ) {
			if(event.indexh == 0) {
				document.querySelector('.reveal').classList.add('slide0');
			} else {
				document.querySelector('.reveal').classList.remove('slide0');
			}
		    
		} );


		if(Reveal.getState().indexh == 0) {
			document.querySelector('.reveal').classList.add('slide0');
		}

		</script>

	</body>
</html>
